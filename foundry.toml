[profile.default]
# --- Project Layout ---
src = "src"
out = "out"
libs = ["lib"]
test = "test"
script = "script"

# --- Compiler Configuration ---
solc_version = "0.8.33"

# Üretim Dengesi: 20.000 yerine 200-1000 arası, initcode boyutunu ciddi oranda düşürür.
# Eğer kontratın hala büyükse bu değeri 200'e kadar çekebilirsin.
optimizer = true
optimizer_runs = 800 

# via_ir: Y-Dili üzerinden optimizasyon yapar. Boyut ve Stack hataları için kritiktir.
via_ir = true
evm_version = "cancun" # X Layer ve modern L2'ler için en iyisi.

# --- Bytecode & Security ---
bytecode_hash = "none"
cbor_metadata = false

# --- Metadata & Output Analysis ---
extra_output = [
    "abi",
    "evm.bytecode",
    "evm.deployedBytecode",
    "evm.methodIdentifiers",
    "metadata",
    "storageLayout"
]

# --- Fuzzing: The Sledgehammer ---
[fuzz]
runs = 10000             # 5000'den 10000'e çıkardık, uç durumları yakalama şansı artar.
seed = '0x31337'
dictionary_weight = 50   # Daha fazla sözlük odaklı (smart fuzzing).
include_storage = true
include_push_bytes = true

# --- Invariant: The Sovereign Shield ---
[invariant]
runs = 3000              # Daha fazla senaryo.
depth = 256              # İşlem derinliğini artırdık (Daha karmaşık state geçişleri).
fail_on_revert = true    # Kırılganlık istemiyoruz.

# --- CI/CD Profile: Hardened (Github Actions için) ---
[profile.ci]
fuzz = { runs = 20000 }
invariant = { runs = 10000, depth = 500 }
verbosity = 4

# --- Infrastructure ---
[rpc_endpoints]
xlayer_mainnet = "https://rpc.xlayer.tech"
xlayer_testnet = "https://testnet.xlayer.tech/rpc"

[etherscan]
xlayer = { key = "${OKLINK_API_KEY}", url = "https://www.oklink.com/api/v5/explorer/contract/verify-source-code-plugin/xlayer" }
